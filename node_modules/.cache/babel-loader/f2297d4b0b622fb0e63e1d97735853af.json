{"ast":null,"code":"var _jsxFileName = \"/home/vusa/Wala_Digital/dashboard/src/views/donors/ManageDonorListView/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Box, Container, makeStyles } from '@material-ui/core';\nimport Page from 'src/components/Page';\nimport Toolbar from './Toolbar';\nimport axios from 'axios';\nimport Donors from './Donors';\nconst token = localStorage.jwt;\nvar user = JSON.parse(localStorage.getItem(\"user\"));\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3)\n  },\n  productCard: {\n    height: '100%'\n  },\n  box: {\n    margin: theme.spacing(4)\n  }\n}));\n\nconst ManageDonorListView = () => {\n  const classes = useStyles();\n  const [bloodDonors, setBloodDonors] = useState([]);\n  useEffect(() => {\n    getAllBloodDonors();\n  }, []);\n\n  const getAllBloodDonors = () => {\n    axios({\n      method: 'GET',\n      url: `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/blood-donors?bloodBank.id=${user.bloodBank.id}&_sort=lastName:ASC`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }) //handle success\n    .then(response => {\n      if (response.data.length === 100) {\n        axios({\n          method: 'GET',\n          url: `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/blood-donors?bloodBank.id=${user.bloodBank.id}&_sort=lastName:ASC&_start=100`,\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }) //handle success\n        .then(response2 => {\n          var temp = response.data.concat(response2.data);\n          setBloodDonors(temp);\n          console.log(temp); // stops here, assuming that there wouldn't be more than 200 donors\n        }).catch(error => console.error(`Error: ${error}`));\n      }\n    }) //handle error\n    .catch(error => console.error(`Error: ${error}`));\n  };\n\n  return /*#__PURE__*/React.createElement(Page, {\n    className: classes.root,\n    title: \"Manage Donors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    maxWidth: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    mt: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Donors, {\n    bloodDonors: bloodDonors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default ManageDonorListView;","map":{"version":3,"sources":["/home/vusa/Wala_Digital/dashboard/src/views/donors/ManageDonorListView/index.js"],"names":["React","useState","useEffect","Box","Container","makeStyles","Page","Toolbar","axios","Donors","token","localStorage","jwt","user","JSON","parse","getItem","useStyles","theme","root","backgroundColor","palette","background","dark","minHeight","paddingBottom","spacing","paddingTop","productCard","height","box","margin","ManageDonorListView","classes","bloodDonors","setBloodDonors","getAllBloodDonors","method","url","bloodBank","id","headers","Authorization","then","response","data","length","response2","temp","concat","console","log","catch","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  Container,\n  makeStyles\n} from '@material-ui/core';\nimport Page from 'src/components/Page';\nimport Toolbar from './Toolbar';\nimport axios from 'axios';\nimport Donors from './Donors';\n\n\nconst token = localStorage.jwt;\nvar user = JSON.parse(localStorage.getItem(\"user\"));\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3)\n  },\n  productCard: {\n    height: '100%',\n  },\n  box: {\n    margin: theme.spacing(4)\n  }\n}));\n\nconst ManageDonorListView = () => {\n  const classes = useStyles();\n  const [bloodDonors, setBloodDonors] = useState([]);\n\n  useEffect(() => {\n    getAllBloodDonors();\n  }, []);\n\n  const getAllBloodDonors = () => {\n    axios({\n      method: 'GET',\n      url: `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/blood-donors?bloodBank.id=${user.bloodBank.id}&_sort=lastName:ASC`,\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n    })\n    //handle success\n    .then((response) => {\n      if (response.data.length === 100) {\n        axios({\n          method: 'GET',\n          url: `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/blood-donors?bloodBank.id=${user.bloodBank.id}&_sort=lastName:ASC&_start=100`,\n          headers: {\n            Authorization: `Bearer ${token}`\n          },\n        })\n        //handle success\n        .then((response2) => {\n          var temp = response.data.concat(response2.data);\n          setBloodDonors(temp);\n          console.log(temp);\n          // stops here, assuming that there wouldn't be more than 200 donors\n        })\n        .catch(error => console.error(`Error: ${error}`));\n      }\n    })\n    //handle error\n    .catch(error => console.error(`Error: ${error}`));\n  }\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Manage Donors\"\n    >\n      <Container maxWidth={false}>\n        <Toolbar />\n        <Box mt={3}>\n          <Donors bloodDonors={bloodDonors} />\n        </Box>\n      </Container>\n    </Page>\n  );\n};\n\nexport default ManageDonorListView;\n"]},"metadata":{},"sourceType":"module"}