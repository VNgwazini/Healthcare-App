{"ast":null,"code":"var _jsxFileName = \"/home/vusa/Wala_Digital/dashboard/src/views/reports/DashboardView/NetworkBloodSupply.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { Bar } from 'react-chartjs-2';\nimport { Box, Button, Card, CardContent, CardHeader, Divider, colors } from '@material-ui/core';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nconst BLOODTYPES = ['A%2B', 'A-', 'B%2B', 'B-', 'AB%2B', 'AB-', 'O%2B', 'O-'];\n\nclass NetworkBloodSupply extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      network: [],\n      // per each blood type, has a list of each bank's inventory for that type\n      bloodbanks: [] // list of banks' names\n\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"jwt\");\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    const getData = async () => {\n      const responseBanks = await axios.get(`http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/bloodbanks?id_ne=${user.bloodBank.id}&_limit=5`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      var tempNames = [];\n      var bankIds = [];\n\n      for (var bank of responseBanks.data) {\n        tempNames.push(bank.name);\n        bankIds.push(bank.id);\n      }\n\n      this.setState({\n        bloodbanks: tempNames\n      });\n      var url, typeList;\n      const currentDate = new Date();\n\n      for (var type of BLOODTYPES) {\n        typeList = [];\n\n        for (var id of bankIds) {\n          url = `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/bloodsupplies?bloodBank.id=${id}&bloodDonor.bloodGroup=${type}&expiration_gt=${currentDate.toISOString()}&usage=unassigned`;\n          const response = await axios.get(url, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          typeList.push(response.data.length);\n        }\n\n        var tempNames = this.state.network;\n        tempNames.push(typeList);\n        this.setState({\n          network: tempNames\n        });\n      }\n    };\n\n    if (user) {\n      getData();\n    }\n  }\n\n  render() {\n    const {\n      className,\n      ...rest\n    } = this.props;\n    const data = {\n      datasets: [{\n        backgroundColor: colors.red[600],\n        data: this.state.network[0],\n        label: 'A+'\n      }, {\n        backgroundColor: colors.orange[600],\n        data: this.state.network[1],\n        label: 'A-'\n      }, {\n        backgroundColor: colors.yellow[600],\n        data: this.state.network[2],\n        label: 'B+'\n      }, {\n        backgroundColor: colors.green[600],\n        data: this.state.network[3],\n        label: 'B-'\n      }, {\n        backgroundColor: colors.teal[600],\n        data: this.state.network[4],\n        label: 'AB+'\n      }, {\n        backgroundColor: colors.blue[600],\n        data: this.state.network[5],\n        label: 'AB-'\n      }, {\n        backgroundColor: colors.indigo[600],\n        data: this.state.network[6],\n        label: 'O+'\n      }, {\n        backgroundColor: colors.purple[600],\n        data: this.state.network[7],\n        label: 'O-'\n      }],\n      labels: this.state.bloodbanks\n    };\n    const options = {\n      animation: false,\n      cornerRadius: 20,\n      layout: {\n        padding: 0\n      },\n      legend: {\n        display: false\n      },\n      maintainAspectRatio: false,\n      responsive: true,\n      scales: {\n        xAxes: [{\n          barThickness: 12,\n          maxBarThickness: 10,\n          barPercentage: 0.5,\n          categoryPercentage: 0.5,\n          gridLines: {\n            display: false,\n            drawBorder: false\n          }\n        }],\n        yAxes: [{\n          ticks: {\n            beginAtZero: true,\n            min: 0\n          },\n          gridLines: {\n            borderDash: [2],\n            borderDashOffset: [2],\n            drawBorder: false,\n            zeroLineBorderDash: [2],\n            zeroLineBorderDashOffset: [2]\n          }\n        }]\n      },\n      tooltips: {\n        borderWidth: 1,\n        enabled: true,\n        intersect: false,\n        mode: 'index'\n      }\n    };\n    var isLoaded = false;\n\n    for (var obj of data[\"datasets\"]) {\n      if (obj[\"data\"]) {\n        for (var entry of obj[\"data\"]) {\n          if (!entry) {\n            isLoaded = false;\n          } else {\n            isLoaded = true;\n          }\n        }\n      } else {\n        isLoaded = false;\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(Card, Object.assign({\n      className: className\n    }, rest, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(CardHeader, {\n      title: \"Network Blood Supply\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/static/loading.gif\",\n      alt: \"Loading...\",\n      style: isLoaded ? {\n        display: \"none\"\n      } : {\n        display: \"block\",\n        margin: \"auto\",\n        height: \"400px\",\n        width: \"50%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      height: 400,\n      position: \"relative\",\n      style: isLoaded ? {\n        display: \"block\"\n      } : {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Bar, {\n      data: data,\n      options: options,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      p: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      endIcon: /*#__PURE__*/React.createElement(ArrowRightIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 22\n        }\n      }),\n      size: \"small\",\n      variant: \"text\",\n      href: \"http://localhost:3000/app/manage_requests\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, \"Make a request\")));\n  }\n\n}\n\n;\nNetworkBloodSupply.propTypes = {\n  className: PropTypes.string\n};\nexport default NetworkBloodSupply;","map":{"version":3,"sources":["/home/vusa/Wala_Digital/dashboard/src/views/reports/DashboardView/NetworkBloodSupply.js"],"names":["React","axios","PropTypes","Bar","Box","Button","Card","CardContent","CardHeader","Divider","colors","ArrowRightIcon","BLOODTYPES","NetworkBloodSupply","Component","constructor","props","state","network","bloodbanks","componentDidMount","token","localStorage","getItem","user","JSON","parse","getData","responseBanks","get","bloodBank","id","headers","Authorization","tempNames","bankIds","bank","data","push","name","setState","url","typeList","currentDate","Date","type","toISOString","response","length","render","className","rest","datasets","backgroundColor","red","label","orange","yellow","green","teal","blue","indigo","purple","labels","options","animation","cornerRadius","layout","padding","legend","display","maintainAspectRatio","responsive","scales","xAxes","barThickness","maxBarThickness","barPercentage","categoryPercentage","gridLines","drawBorder","yAxes","ticks","beginAtZero","min","borderDash","borderDashOffset","zeroLineBorderDash","zeroLineBorderDashOffset","tooltips","borderWidth","enabled","intersect","mode","isLoaded","obj","entry","margin","height","width","propTypes","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  colors\n} from '@material-ui/core';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\n\nconst BLOODTYPES = ['A%2B', 'A-', 'B%2B', 'B-', 'AB%2B', 'AB-', 'O%2B', 'O-'];\n\nclass NetworkBloodSupply extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      network: [], // per each blood type, has a list of each bank's inventory for that type\n      bloodbanks: [] // list of banks' names\n    }\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"jwt\");\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    const getData = async () => {\n      const responseBanks = await axios.get(`http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/bloodbanks?id_ne=${user.bloodBank.id}&_limit=5`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      var tempNames = [];\n      var bankIds = [];\n      for (var bank of responseBanks.data) {\n        tempNames.push(bank.name);\n        bankIds.push(bank.id);\n      }\n      this.setState({\n        bloodbanks: tempNames\n      });\n\n      var url, typeList;\n      const currentDate = new Date();\n\n      for (var type of BLOODTYPES) {\n        typeList = [];\n        for (var id of bankIds) {\n          url = `http://ec2-35-180-116-27.eu-west-3.compute.amazonaws.com:1337/bloodsupplies?bloodBank.id=${id}&bloodDonor.bloodGroup=${type}&expiration_gt=${currentDate.toISOString()}&usage=unassigned`;\n          const response = await axios.get(url, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          });\n          typeList.push(response.data.length);\n        }\n        var tempNames = this.state.network;\n        tempNames.push(typeList);\n        this.setState({\n          network: tempNames\n        });\n      }\n    } \n\n    if (user) {\n      getData();\n    }\n  }\n\n  render() {\n    const {className, ...rest} = this.props;\n\n    const data = {\n      datasets: [\n        {\n          backgroundColor: colors.red[600],\n          data: this.state.network[0],\n          label: 'A+'\n        },\n        {\n          backgroundColor: colors.orange[600],\n          data: this.state.network[1],\n          label: 'A-'\n        },\n        {\n          backgroundColor: colors.yellow[600],\n          data: this.state.network[2],\n          label: 'B+'\n        },\n        {\n          backgroundColor: colors.green[600],\n          data: this.state.network[3],\n          label: 'B-'\n        },\n        {\n          backgroundColor: colors.teal[600],\n          data: this.state.network[4],\n          label: 'AB+'\n        },\n        {\n          backgroundColor: colors.blue[600],\n          data: this.state.network[5],\n          label: 'AB-'\n        },\n        {\n          backgroundColor: colors.indigo[600],\n          data: this.state.network[6],\n          label: 'O+'\n        },\n        {\n          backgroundColor: colors.purple[600],\n          data: this.state.network[7],\n          label: 'O-'\n        }\n      ],\n      labels: this.state.bloodbanks\n    };\n  \n    const options = {\n      animation: false,\n      cornerRadius: 20,\n      layout: { padding: 0 },\n      legend: { display: false },\n      maintainAspectRatio: false,\n      responsive: true,\n      scales: {\n        xAxes: [\n          {\n            barThickness: 12,\n            maxBarThickness: 10,\n            barPercentage: 0.5,\n            categoryPercentage: 0.5,\n            gridLines: {\n              display: false,\n              drawBorder: false\n            }\n          }\n        ],\n        yAxes: [\n          {\n            ticks: {\n              beginAtZero: true,\n              min: 0\n            },\n            gridLines: {\n              borderDash: [2],\n              borderDashOffset: [2],\n              drawBorder: false,\n              zeroLineBorderDash: [2],\n              zeroLineBorderDashOffset: [2],\n            }\n          }\n        ]\n      },\n      tooltips: {\n        borderWidth: 1,\n        enabled: true,\n        intersect: false,\n        mode: 'index',\n      }\n    };\n\n    var isLoaded = false;\n    for (var obj of data[\"datasets\"]) {\n      if (obj[\"data\"]) {\n        for (var entry of obj[\"data\"]) {\n          if (!entry) {\n            isLoaded = false;\n          }\n          else {\n            isLoaded = true;\n          }\n        }\n      }\n      else {\n        isLoaded = false;\n      }\n    }\n  \n    return (\n      <Card\n        className={className}\n        {...rest}\n      >\n        <CardHeader\n          title=\"Network Blood Supply\"\n        />\n        <Divider />\n        <CardContent>\n          <img src=\"/static/loading.gif\" alt=\"Loading...\"\n              style={isLoaded ? {display: \"none\"} : {display: \"block\", margin: \"auto\", height: \"400px\", width: \"50%\"}}/>\n          <Box\n            height={400}\n            position=\"relative\"\n            style={isLoaded ? {display: \"block\"} : {display: \"none\"}}\n          >\n            <Bar\n              data={data}\n              options={options}\n            />\n          </Box>\n        </CardContent>\n        <Divider />\n        <Box display=\"flex\" justifyContent=\"flex-end\" p={2}>\n          <Button\n            color=\"primary\"\n            endIcon={<ArrowRightIcon />}\n            size=\"small\"\n            variant=\"text\"\n            href=\"http://localhost:3000/app/manage_requests\"\n          >\n            Make a request\n          </Button>\n        </Box>\n      </Card>\n    );\n  }\n};\n\nNetworkBloodSupply.propTypes = {\n  className: PropTypes.string\n};\n\nexport default NetworkBloodSupply;\n"]},"metadata":{},"sourceType":"module"}